#!/usr/bin/env bash

sltime=30
maxtime=300000

while true; do
    sleep $sltime

    if [[ $(xprintidle) -ge $maxtime ]] && [[ -z "$(pgrep -f ^i3lock)" ]]; then
        lock-screen &
        sleep 0.5
        xset dpms force off
    fi
done
