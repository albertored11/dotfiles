#!/usr/bin/env bash

tabbedid=$1

bspc subscribe node_remove | while read node; do
    node=$(echo $node | cut -d ' ' -f4)
    if [[ "$node" == "$tabbedid" ]]; then
        tabbedsub_px=$(pgrep -P $(pgrep -fo "tabbed-sub $tabbedid") -f "bspc")
        kill $tabbedsub_px
        exit 0
    fi
done
